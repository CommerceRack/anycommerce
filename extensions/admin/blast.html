<div id='blastManagerTemplate' data-app-role='slimLeftContainer'>

	<section class='slimLeftNav' data-app-role='slimLeftNav'>
		<div class='accordion marginBottom'>
			<h2>Order</h2>
			<div>
				<ul data-app-role="blastmessages_ORDER" class='noPadOrMargin listStyleNone'></ul>
			</div>
	
			<h2>Customer</h2>
			<div>
				<ul data-app-role="blastmessages_ACCOUNT" class='noPadOrMargin listStyleNone'></ul>
			</div>
	
			<h2>Product</h2>
			<div>
				<ul data-app-role="blastmessages_PRODUCT" class='noPadOrMargin listStyleNone'></ul>
			</div>
	
			<h2>Ticket</h2>
			<div>
				<ul data-app-role="blastmessages_TICKET" class='noPadOrMargin listStyleNone'></ul>
			</div>
	
			<h2>Supply Chain</h2>
			<div>
				<ul data-app-role="blastmessages_SUPPLY" class='noPadOrMargin listStyleNone'></ul>
			</div>
		</div>
		<!-- a container is necessary around this button for positioning of the menu -->
		<div class='buttonset'>
			<button class='applyButton' data-icon-secondary='ui-icon-triangle-1-s' data-icon-primary='ui-icon-plus' data-text='true' data-app-click='admin|showMenu'>Add Message</button>
			<menu data-app-role='messageBlastCreateList' class='displayNone'>
				<li><a href='#' data-msgtype='CUSTOMER' data-app-click='admin_blast|adminBlastMsgCreateShow'>Customer</a></li>
				<li><a href='#' data-msgtype='ORDER' data-app-click='admin_blast|adminBlastMsgCreateShow'>Order</a></li>
				<li><a href='#' data-msgtype='PRODUCT' data-app-click='admin_blast|adminBlastMsgCreateShow'>Product</a></li>
				<li><a href='#' data-msgtype='SUPPLY' data-app-click='admin_blast|adminBlastMsgCreateShow'>Supply</a></li>
				<li><a href='#' data-msgtype='TICKET' data-app-click='admin_blast|adminBlastMsgCreateShow'>Ticket</a></li>
			</menu>
		</div>
	</section>
	
	<section class='slimLeftContentSection' data-app-role='slimLeftContentSection'>
		<div class='ui-widget-content ui-corner-all stdPadding slimLeftContentContainer' data-app-role='slimLeftContentContainer'>
		<!-- page contents will go here -->
		</div>
	</section>

</div>


<div id='blastMessageAddTemplate'>
	<form action='#' data-app-submit='admin_blast|adminBlastMsgCreateExec' novalidate>
	<input type='hidden' name='msgtype' data-tlc="bind $var '.msgtype'; apply --select=$var;" />
	<fieldset class='labelsAsBreaks alignedLabels'>
		<label>
			<span>Message id</span>
			<span data-tlc="bind $var '.msgtype'; format --append='.'; apply --append;"></span>
			<input type='text' name='msgid' data-input-keyup="format" data-input-format='alphanumeric,uppercase' required='requied' />
		</label>
		<button class='applyButton'>Create</button>
	</fieldset>
	</form>
</div>


<div id='blastMessageSendTestTemplate'>
	<form action='#' class='labelsAsBreaks alignedLabels'>

	<input type='hidden' name='_cmd' value='adminBlastMsgSend' />
	<input type='hidden' name='_tag/callback' value='showMessaging' />
	<input type='hidden' name='_tag/message' value='Your test message has been sent.' />

	<fieldset>
		<label>
			<span>Receiver</span>
			<select name='RECEIVER' data-panel-selector=".blastMsgReceiverInputs" data-input-change='show-panel'>
				<option>please choose</option>
				<option value='EMAIL'  data-show-panel='blastMsgReceiverEmail'>Email</option>
				<option value='CUSTOMER' data-show-panel='blastMsgReceiverCustomer'>Customer</option>
				<optgroup label="Push Notifications">
					<option value='GCN'>Google</option>
					<option value='APNS'>Apple</option>
					<option value='ADN'>Amazon</option>
				</optgroup>
			</select>
		</label>

	<div class='blastMsgReceiverInputs'  data-panel-id='blastMsgReceiverEmail'>
		<label>
			<span>Email</span>
			<input type='email' name='EMAIL' required='required' data-validation-rules='skipIfHidden' />
		</label>
	</div>

	<div class='blastMsgReceiverInputs label'  data-panel-id='blastMsgReceiverCustomer'>
		<label>
			<span>Customer id</span>
			<input type='number' name='CID' required='required' data-validation-rules='skipIfHidden' />
		</label>

		<div>
			find customer id by email 
			<input type='email' name='emailForSearch' />
			<button class='applyButton' data-text='false' data-icon-primary='ui-icon-search' data-app-click="admin_blast|adminBlastCustomerFind">search</button>
		</div>
	
	</div>

	</fieldset>

	<div class='buttonset'>
		<button class='applyButton'  data-app-click='admin|submitForm'>Send</button>
	</div>
	</form>
</div>





<div id='blastMessageDetailTemplate' class='clearfix'>

	<form action='#' data-app-submit='admin|submitForm' novalidate='novalidate'>
	<input type='hidden' name='MSGID'  data-tlc="bind $var '.%MSG.MSGID'; apply --select=$var;"  />
	
	<input type='hidden' name='_cmd' value='adminBlastMsgUpdate' />
	<input type='hidden' name='_tag/callback' value='showMessaging' />
	<input type='hidden' name='_tag/message' value='Your changes have been saved.' />
	<input type='hidden' name='_tag/restoreInputsFromTrackingState' value='1' />

	<div class='buttonset ui-corner-all ui-widget-content smallPadding marginBottom clearfix'>
		<h2 data-tlc="bind $var '.MSGID'; apply --select=$var;"></h2>
		<button data-app-role='saveButton' class='applyButton floatRight'>Save <span class='numChanges'></span> Changes</button>
		<button class='floatRight applyButton' data-text='true' data-app-click='admin_blast|adminBlastMsgSendTestShow'>Send Test</button>
	</div>


	<div class='applyAnytabs labelsAsBreaks alignedLabels alignedInputs'>
		<!-- tabs for editor -->
		<ul>
			<li><a href='#message'>Message</a></li>
			<li><a href='#email'>Email</a></li>
			<li><a href='#push'>Push</a></li>
		<!--	<li>SMS</li>-->
		</ul>

		<fieldset data-anytab-content='email'>
		
			<label>
				<span>From:</span>
				<input type='text' name='%META.email_from' maxlength="100" data-tlc="bind $var '.%MSG.%META.email_from'; apply --select=$var;" />
			</label>
			<label>
				<span>bcc:</span>
				<input type='text' name='%META.email_bcc' maxlength="100" data-tlc="bind $var '.%MSG.%META.email_bcc'; apply --select=$var;" />
			</label>
		
		</fieldset>

		<fieldset data-anytab-content='message'>

			<label>
				<span>Subject:</span>
				<input type='text' name='SUBJECT' required='required' maxlength="100" data-tlc="bind $var '.%MSG.SUBJECT'; apply --select=$var;" />
			</label>
			
			<label>
				<span>Message:</span>
				<textarea name='BODY' rows='10' required='required' data-tlc="bind $var '.%MSG.BODY'; apply --select=$var;"></textarea>
			</label>

		</fieldset>
		
		<fieldset data-anytab-content='push'>
		
			<label>
				<span>Properties:</span>
				<textarea name='%META.properties' rows='10' data-tlc="bind $var '.%MSG.%META.properties'; apply --select=$var;"></textarea>
			</label>		
		
		
		</fieldset>

	</div>	
		<!--
	to: email, GCM(google cloud messaging), APNS (apple push notification) ADN
	based on selection, shows appropriate input. 
	for test, send type  'EMAIL' or 'CUSTOMER' and then EMAIL='something@somewhere.com' or CUSTOMER=CID
-->
	</form>
</div>



<div id='blastToolTemplate'>
<form action='#' novalidate>
	<input type='hidden' name='PRT' value='' data-tlc="bind $var '.%MSG.PRT'; apply --select=$var;" />
	<input type='hidden' name='OBJECT' value='' data-tlc="bind $var '.%MSG.OBJECT'; apply --select=$var;" />
	<input type='hidden' name='FORMAT' value='HTML5' />

	<input type='hidden' name='_cmd' value='adminBlastMsgSend' />
	<input type='hidden' name='_tag/callback' value='showMessaging' />
	<input type='hidden' name='_tag/message' value='Your changes have been saved.' />
	<input type='hidden' name='_tag/persistent' value='true' /><!-- leaves success present. important cuz form is NOT cleared so user can easily send another message -->
	<input type='hidden' name='_tag/restoreInputsFromTrackingState' value='1' />


	<fieldset class='labelsAsBreaks alignedLabels alignedInputs marginBottom'>
		<label>
			<span>Receiver:</span>
			<select name='RECEIVER' required='required' data-tlc="bind $var '.RECEIVER'; apply --select=$var;" data-panel-selector=".blastToolReceiverInputs" data-input-change='show-panel'>
				<option value='EMAIL' selected="selected" data-show-panel='blastToolEmailInputs'>Email</option>
				<option value='CUSTOMER' selected="selected" data-show-panel='blastToolCustomerInputs'>Customer</option>
				<optgroup label="Push Notifications">
					<option value='GCN'>Google</option>
					<option value='APNS'>Apple</option>
					<option value='ADN'>Amazon</option>
				</optgroup>
			</select>
		</label>

		<label class='blastToolReceiverInputs displayNone' data-panel-id='blastToolEmailInputs'>
			<span>Email address:</span>
			<input type='text' name='EMAIL' required='required' maxlength="100" required="required" data-validation-rules='skipIfHidden' data-tlc="bind $var '.EMAIL'; apply --select=$var;" />
		</label>

		<label class='blastToolReceiverInputs displayNone' data-panel-id='blastToolCustomerInputs'>
			<span>Customer ID:</span>
			<input type='number' step='1' min='0' name='CID' required='required' maxlength="10" required="required" data-validation-rules='skipIfHidden' data-tlc="bind $var '.CID'; apply --select=$var;" />
		</label>

		<label>
			<span>Message source:</span>
			<select name='MSGID' data-tlc="bind $var '.@MSGS'; admin_blast#msgsasoptions; apply --prepend;" data-app-change="admin_blast|updateBlastInputsBySource">
				<option value='BLANK' selected="selected">blank</option>
			</select>
		</label>

	</fieldset>
	
	<fieldset data-app-role='blastToolMsgContent'  class='labelsAsBreaks alignedLabels alignedInputs marginBottom'>
	<!-- any content that is message specific (should get changed when msgid changes) should be within this fieldset -->
		<label>
			<span>Subject:</span>
			<input type='text' name='SUBJECT' required='required' maxlength="100" data-tlc="bind $var '.%MSG.SUBJECT'; apply --select=$var;" />
		</label>
		
		<label>
			<span>Message:</span>
			<textarea name='BODY' rows='10' required='required'  data-tlc="bind $var '.%MSG.BODY'; apply --select=$var;"></textarea>
		</label>
	</fieldset>


	<fieldset class='updateSystemMessageContainer marginBottom'>
	<label>
		<!-- <input type='checkbox' name='updateSystemMessage' disabled='disabled' />-->
		<!-- Save these changes to the message <span class='msgType'></span> for all future emailsthe .msgType is used to populate the message ID in focus. -->
	</label>
	</fieldset>

	<button class='applyButton' data-app-click="admin|submitForm">Send Email</button>

</form>
</div>



<div id='adminBlastMacroCreateUpdateTemplate'>

<form class='labelsAsBreaks alignedLabels' data-app-submit='admin|submitForm'>



	<label>
		<span>Title</span>
		<input type='text' name='TITLE' required='required' value='' data-tlc="bind $var '.TITLE'; apply --select=$var;" />
	</label>
	<label>
		<span>Macro ID</span>
		<input type='text' name='MACROID' required='required' value='' data-tlc="bind $var '.MACROID'; apply --select=$var;" data-format-rules='blastMacroMacroID' data-input-keyup="format" data-input-format='uppercase' />
		<span class='toolTip' title="This is the value that will be substituted in the body of the message. ex: %ORDERID%. Must begin and end with a percent sign and contain no other special characters or spaces.">?</span>
	</label>
	<label>
		<span>Body</span>
		<textarea name='BODY' required='required' data-tlc="bind $var '.BODY'; apply --select=$var;"></textarea>
	</label>
	<div class='buttonset'>
		<button class='applyButton'>Save</button>
	</div>
</form>

</div>


<!-- these templates are used as part of DMI, so they're bind, not tlc -->
<table>
<tr id='blastMacroRowTemplate'>
	<td data-bind="var: macro(TITLE); format:text;"></td>
	<td data-bind="var: macro(MACROID); format:text;"></td>
	<td data-bind="var: macro(CREATED_TS); format:text;"></td>
	<td data-bind="var: macro(LUSER); format:text;"></td>
	<td class='alignRight'>
		<button data-icon-primary='ui-icon-trash' data-text='false' class='applyButton' data-app-click='admin_blast|blastMacroDeleteConfirm'>Delete</button>
		<button data-icon-primary='ui-icon-pencil' data-text='false' class='applyButton' data-app-click='admin_blast|blastMacroUpdateShowPanel'>Edit</button>
	</td>
</tr>
</table>



<div id='blastMacroProperyEditorTemplate'>
<form data-app-submit="admin|submitForm" class='labelsAsBreaks' action='#'>

<input type='hidden' name='_cmd' value='adminBlastMacroPropertyUpdate' />
<input type='hidden' name='_tag/callback' value='showMessaging' />
<input type='hidden' name='_tag/message' value='Your changes have been saved.' />
<input type='hidden' name='_tag/restoreInputsFromTrackingState' value='1' />

<fieldset class='floatRight width50'>
	<legend>Properties</legend>
	<label>
		<span>Syntax</span>
		<select name='PRT.LINKSYNTAX' data-tlc="bind $var '.%PRT.LINKSYNTAX'; apply --select=$var;">
			<option value='APP'>App</option>
			<option value='VSTORE'>Vstore</option>
		</select>
</fieldset>

<fieldset>
	<legend>Contact</legend>
	<p>The following fields are all optional, but highly recommended.</p>
	<label>
		<span>Domain</span>
		<input type='text' name='PRT.DOMAIN' value='' data-tlc="bind $var '.%PRT.DOMAIN'; apply --select=$var;" />
		<span class='toolTip' title="You should start this with www.  You do NOT need to add the http:// or https://">?</span>
	</label>
	<label>
		<span>Phone</span>
		<input type='tel' name='PRT.PHONE' value='' data-tlc="bind $var '.%PRT.PHONE'; apply --select=$var;" />
		<span class='toolTip' title="This should include the area code, if applicable.">?</span>
	</label>
	<label>
		<span>Email</span>
		<input type='email' name='PRT.EMAIL' value='' data-tlc="bind $var '.%PRT.EMAIL'; apply --select=$var;" />
	</label>
	<label>
		<span>Mailing Address</span>
		<textarea name='PRT.MAILADDR' data-tlc="bind $var '.%PRT.MAILADDR'; apply --select=$var;" />
	</label>
</fieldset>




	<div class='buttonset'><button class='applyButton'>Save</button></div>

</form>
</div>
